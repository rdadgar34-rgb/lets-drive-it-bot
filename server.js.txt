
import fetch from "node-fetch";

const BOT_TOKEN = process.env.BOT_TOKEN;
const CHAT_ID = process.env.CHAT_ID;
const MIN_PRICE = process.env.MIN_PRICE;
const UBER_ACCESS_TOKEN = process.env.UBER_ACCESS_TOKEN;

console.log("ðŸš— Let's Drive It bot started...");

async function checkTrips() {
  console.log("checking trips...");

  const fakeTrips = [
    { id: 1, price: 35 },
    { id: 2, price: 28 },
    { id: 3, price: 42 },
  ];

  const filteredTrips = fakeTrips.filter(trip => trip.price > MIN_PRICE);

  for (const trip of filteredTrips) {
    const message = `ðŸš— Trip #${trip.id} â€” â‚¬${trip.price}`;
    const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(message)}`;
    await fetch(url);
  }
}

checkTrips();
setInterval(checkTrips, 15 * 60 * 1000);
